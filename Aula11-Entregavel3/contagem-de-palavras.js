import { HashTable } from "./hash-table.js";

/*
Assuma o seguinte texto (tokenizado):
OBS: Coloque a seta do mouse sob o 9 que marca a
linha 9 e pressione a seta para esconder o texto, se quiser!
*/

const texto = [
  "o",
  "mercado",
  "e",
  "como",
  "a",
  "guerra",
  "so",
  "os",
  "mais",
  "sabios",
  "vao",
  "alem",
  "o",
  "ocidente",
  "enfim",
  "desperta",
  "e",
  "flerta",
  "com",
  "a",
  "filosofia",
  "zen",
  "foi",
  "um",
  "gerente",
  "iluminado",
  "pela",
  "semente",
  "da",
  "inovacao",
  "calculou",
  "que",
  "o",
  "espirito",
  "elevado",
  "dinamiza",
  "a",
  "producao",
  "jornadas",
  "de",
  "14",
  "horas",
  "ao",
  "som",
  "de",
  "mantras",
  "do",
  "tibet",
  "assim",
  "a",
  "raiva",
  "se",
  "controla",
  "entao",
  "o",
  "imperio",
  "segue",
  "em",
  "pe",
  "apos",
  "o",
  "expediente",
  "convocase",
  "a",
  "meditacao",
  "no",
  "pleno",
  "equilibrio",
  "da",
  "mente",
  "a",
  "gente",
  "sente",
  "gratidao",
  "caminhando",
  "sobre",
  "as",
  "brasas",
  "dos",
  "cadaveres",
  "no",
  "chao",
  "sinta",
  "a",
  "mente",
  "esvaziada",
  "toda",
  "dor",
  "e",
  "uma",
  "ilusao",
  "levitando",
  "junto",
  "aos",
  "fluxos",
  "das",
  "acoes",
  "em",
  "ascensao",
  "o",
  "desapego",
  "purifica",
  "a",
  "aura",
  "da",
  "especulacao",
  "meditando",
  "atras",
  "de",
  "bemestar",
  "enquanto",
  "financia",
  "a",
  "dor",
  "hoje",
  "eu",
  "canto",
  "pra",
  "acabar",
  "com",
  "toda",
  "paz",
  "interior",
  "o",
  "executivo",
  "quer",
  "ser",
  "zen",
  "o",
  "monge",
  "ensina",
  "como",
  "faz",
  "mente",
  "concentrada",
  "renda",
  "concentrada",
  "da",
  "grana",
  "emana",
  "a",
  "pura",
  "paz",
  "um",
  "honoravel",
  "selfmade",
  "man",
  "busca",
  "elevacao",
  "mental",
  "maravilhoso",
  "e",
  "o",
  "seu",
  "knowhow",
  "mantra",
  "que",
  "o",
  "lucro",
  "atrai",
  "mas",
  "todo",
  "imperio",
  "um",
  "dia",
  "cai",
  "liderancas",
  "empresariais",
  "seguem",
  "a",
  "licao",
  "dos",
  "samurais",
  "autoajuda",
  "vem",
  "dos",
  "manuais",
  "chuva",
  "de",
  "cliches",
  "orientais",
  "misturando",
  "artes",
  "marciais",
  "com",
  "os",
  "ideais",
  "neoliberais",
  "para",
  "aniquilar",
  "os",
  "seus",
  "rivais",
  "no",
  "mercado",
  "de",
  "capitais",
  "nada",
  "e",
  "por",
  "acaso",
  "nao",
  "existem",
  "coincidencias",
  "algo",
  "em",
  "outro",
  "plano",
  "une",
  "as",
  "nossas",
  "consciencias",
  "a",
  "cada",
  "passo",
  "a",
  "cada",
  "gesto",
  "em",
  "todo",
  "paradeiro",
  "age",
  "uma",
  "forca",
  "maior",
  "dinheiro",
  "to",
  "ligada",
  "neles",
  "to",
  "atenta",
  "e",
  "ja",
  "notei",
  "que",
  "na",
  "verdade",
  "eles",
  "tao",
  "simulando",
  "te",
  "chamam",
  "colaborador",
  "pra",
  "omitir",
  "que",
  "na",
  "real",
  "eles",
  "tao",
  "te",
  "explorando",
  "pessoas",
  "elevadas",
  "aumentaram",
  "o",
  "lucro",
  "e",
  "aumentaram",
  "a",
  "concentracao",
  "dieta",
  "natural",
  "evita",
  "comer",
  "carne",
  "so",
  "que",
  "bebe",
  "o",
  "sangue",
  "dos",
  "irmao",
  "executivo",
  "zen",
  "do",
  "bem",
  "que",
  "desapega",
  "de",
  "tudo",
  "que",
  "e",
  "material",
  "compra",
  "roupa",
  "cara",
  "e",
  "fala",
  "da",
  "empregada",
  "se",
  "a",
  "camisa",
  "ela",
  "lava",
  "mal",
  "comida",
  "processada",
  "cancer",
  "enlatado",
  "comprei",
  "carne",
  "sabor",
  "papelao",
  "o",
  "magnata",
  "da",
  "industria",
  "vende",
  "lixo",
  "comestivel",
  "pra",
  "populacao",
  "esse",
  "e",
  "o",
  "segredo",
  "do",
  "cash",
  "kakashi",
  "fala",
  "baixo",
  "porque",
  "eles",
  "estao",
  "meditando",
  "luxo",
  "made",
  "in",
  "bangladesh",
  "bem",
  "oriental",
  "um",
  "fake",
  "ao",
  "estilo",
  "branco",
  "yoga",
  "na",
  "moda",
  "da",
  "elite",
  "o",
  "opressor",
  "busca",
  "equilibrio",
  "e",
  "bem",
  "tranquilo",
  "explora",
  "controla",
  "oprime",
  "violenta",
  "o",
  "povo",
  "do",
  "haiti",
  "ritual",
  "ocidental",
  "de",
  "apropriacao",
  "da",
  "cultura",
  "larga",
  "a",
  "bomba",
  "em",
  "nagasaki",
  "depois",
  "faz",
  "acupuntura",
  "essa",
  "culpa",
  "nao",
  "tem",
  "cura",
  "nem",
  "nunca",
  "havera",
  "perdao",
  "chegaram",
  "os",
  "ratos",
  "pra",
  "roer",
  "com",
  "o",
  "feng",
  "shui",
  "da",
  "mansao",
  "porque",
  "nos",
  "tuneis",
  "debaixo",
  "do",
  "chao",
  "chora",
  "a",
  "lembranca",
  "sobre",
  "a",
  "chuva",
  "de",
  "napalm",
  "na",
  "pele",
  "de",
  "uma",
  "crianca",
  "pra",
  "essa",
  "culpa",
  "nao",
  "tem",
  "cura",
  "nem",
  "nunca",
  "havera",
  "perdao",
  "segura",
  "que",
  "agora",
  "e",
  "hora",
  "da",
  "tua",
  "purificacao",
  "ja",
  "nao",
  "vai",
  "dormir",
  "em",
  "paz",
  "o",
  "honoravel",
  "selfmade",
  "man",
  "a",
  "insonia",
  "lhe",
  "corroi",
  "a",
  "babilonia",
  "roi",
  "e",
  "que",
  "a",
  "cerimonia",
  "ta",
  "pra",
  "comecar",
  "o",
  "executivo",
  "quer",
  "ser",
  "zen",
  "o",
  "monge",
  "ensina",
  "como",
  "faz",
  "pega",
  "querosene",
  "nao",
  "corre",
  "nem",
  "treme",
  "taca",
  "fogo",
  "nessa",
  "falsa",
  "paz",
  "para",
  "honrar",
  "quem",
  "lenha",
  "pra",
  "tua",
  "fornalha",
  "foi",
  "lenha",
  "pra",
  "tua",
  "fogueira",
  "eu",
  "serei",
];

/*
Agora, implemente um programa que faça a contagem das
palavras (distribuição de frequências) do texto.

Você deve implementar duas soluções:

1) Um programa que calcule a distribuição de frequências
das palavras UTILIZANDO SOMENTE VETORES (um vetor de tuplas, no caso);

2) Um programa que calcule a distribuição de frequências
das palavras utilizando HashTable;

Depois, utilize as funções console.time e console.timeEnd para
mostrar a diferença de performance entre as duas soluções.

REQUISITOS/DICAS

1) Mostre no console a contagem das palavras nas duas versões;

2) Nos arquivos exemplo-vetor.json e exemplo-hashtable.json
estão exemplos de como as suas saídas devem se parecer;

3) Utilize o método .toObject() de HashTable para converter a
tabela hash para um objeto para conseguir mostrar no
console.log (ou console.table) com mais facilidade.
*/

function contarPalavrasArray() {
  let contagem = [];

  for (const palavra of texto) {
    // Determina se o vetor já possui uma tupla com essa palavra
    let indexExiste = false;

    for (let i = 0; i < contagem.length; i++) {
      if (contagem[i][0] == palavra) {
        indexExiste = true;
        contagem[i][1]++;
        break;
      }
    }

    if (!indexExiste) {
      contagem.push([palavra.toString(), 1]);
    }
  }

  return contagem;
}

//console.log(contarPalavrasArray());

function contarPalavrasHashTable() {
  let contagem = new HashTable(100);

  for (const palavra of texto) {
    const valorAtual = contagem.get(palavra);

    if (valorAtual == null) {
      contagem.set(palavra, 1);
      continue;
    }

    contagem.set(palavra, valorAtual + 1);
  }

  return contagem;
}

//console.log(contarPalavrasHashTable().toObject());

console.time("Implementação com vetor");
contarPalavrasArray();
console.timeEnd("Implementação com vetor");

console.time("Implementação com hash table (100 buckets)");
contarPalavrasHashTable();
console.timeEnd("Implementação com hash table (100 buckets)");
